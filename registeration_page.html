<html>
<head>
<title>
</title>
<link rel="stylesheet" type="text/css" href="css/registerationSecondary.css">
<script language="javascript" src="script/jquery-1.2.6.pack.js"></script> 
<script language="javascript" type="text/javascript"> </script>

<script>
function checkPassword(whatYouTyped) {
	var fieldset = whatYouTyped.parentNode;
	var txt = whatYouTyped.value;
	if (txt.length > 3 && txt.length < 8) {
//		fieldset.className = "kindagood";
	} else if (txt.length > 7) {
		//fieldset.className = "welldone";
	} else {
		fieldset.className = "";
	}
}

 $(document).ready(function(){
     var homepageurl="http://project492.engr.sjsu.edu/homepage.html";
    var loginurl="http://project492.engr.sjsu.edu/index.html";
    var registerationurl="http://project492.engr.sjsu.edu/registeration_page.html";

    $("#registerbutton").click(function(){
		var firstname=$("#firstname").val();
		console.log("firstname:",firstname);
		
		var lastname=$("#lastname").val();
		console.log("lastname:",lastname);
		
		var phonenumber=$("#phonenumber").val();
		console.log("phonenumber:",phonenumber);
		
		var street=$("#street").val();
		console.log("street:",street);
		
		var city=$("#city").val();
		console.log("city:",city);
		
		var username=$("#username").val();
		console.log("username:",username);
		
		var userpass=$("#password").val();
		console.log("userpass:",userpass);
		
		var againuserpass=$("#againpassword").val();
		console.log("againuserpass:",againuserpass);
		
		var email=$("#email").val();
		console.log("email:",email);
		
		

		var usertype=$("#userTypeValue").val();
		console.log("usertype:",usertype);
		
		$.post("travIT.php",{"username":username,"userpass":userpass,"useremail":email,"usertype":usertype,"firstname":firstname,"lastname":lastname,"phonenumber":phonenumber,"address":street+city},function(response){


		//alert("resp:"+response);
			if(jQuery.trim(response)=="new"){
				alert("Welcome New User");
				var url=loginurl;
				window.location=url;

			}else{
			alert("This Username already exists");
			$("#username").val("");
			$("#username").css("background-color","Red");
			}
		});
});



$("#cancelbutton").click(function(){
$(location).attr('href',loginurl);


});


$("input").focus(function(){
console.log("here");
var inputs = document.getElementsByTagName("input");
console.log("inputs:",inputs);
console.log("active:",document.activeElement);
  for (var i=0; i<inputs.length; i++){
  if(inputs[i]==document.activeElement){
  	 this.parentNode.getElementsByTagName("span")[0].style.display = "inline";
  }else{
  console.log("this:",inputs[i].getElementsByTagName("span"));
  }
}
});


$("input").blur(function(){
console.log(" focus out here");
console.log(this);

  	 this.parentNode.getElementsByTagName("span")[0].style.display = "none";

//	  	 this.parentNode.getElementsByTagName("span")[0].style.display = "none";
});



});

</script> 
</head>
<body>

	<form class="register">
		<h1><img src="registerationImage"/>Registration</h1>
		<fieldset>
	<label for="username">Choose a Username:</label>
	<input
		type="text"
		id="username"
		onkeyup="checkUsernameForLength(this);" />
	<span class="hint">Usernames must be a least 6 characters in length.</span>
</fieldset>

<fieldset>
	<label for="password">Enter a password:</label>
	<input
		type="password"
		id="password"
		onkeyup="checkPassword(this);" />
	<span class="hint">The password can be any combination of characters, and must be at least 4 characters in length.  8 characters recommended!</span>
</fieldset>

<fieldset>
	<label for="againpassword">Enter the password again:</label>
	<input
		type="password"
		id="againpassword"
		onkeyup="checkPassword(this);" />
	<span class="hint">The password can be any combination of characters, and must be at least 4 characters in length.  8 characters recommended!</span>
</fieldset>
<fieldset>
	<label for="email">Enter your email address:</label>
	<input
		type="text"
		id="email"
		onkeyup="checkEmail(this);" />
	<span class="hint">You can enter your real address without worry - we don't spam!</span>

</fieldset>
	<fieldset>
	<label for="firstname">Enter Firstname:</label>
	<input
		type="text"
		id="firstname"
		 />
	<span class="hint">Enter your Firstname.Only Characters are allowed.</span>
</fieldset>
	<fieldset>
	<label for="lastname">Enter your Lastname:</label>
	<input
		type="text"
		id="lastname"
		 />
	<span class="hint">Enter your Lastname.Only Characters are allowed.</span>
</fieldset>

	<fieldset>
	<label for="phonenumber">Enter Phonenumber:</label>
	<input
		type="text"
		id="phonenumber"
		onkeyup="checkUsernameForLength(this);" />
	<span class="hint">Phonenumber shuold be 10 characters in length.</span>
</fieldset>

	<fieldset>
	<label for="street">Enter Street Address:</label>
	<input
		type="text"
		id="street"
		 />
	<span class="hint">Enter your complete street address.</span>
</fieldset>

<fieldset>
	<label for="city">Enter City:</label>
	<input
		type="text"
		id="city"
		/>
	<span class="hint">Enter City. Enter the full name of the city</span>
</fieldset>
		
	<fieldset>
			<label>User Type *</label>
			<div id="userTypeRadioButton">
			<select id="userTypeValue">
  <option>User</option>
  <option>Vendor</option>
  <option>Distributor</option>
<option>Retailer</option>
</select>	
			</div>
		</p>
	</fieldset>
<input type="button" value="Register!" id="registerbutton" class ="button"/>
<input type="button" value="Cancel!" id="cancelbutton" class="button" /> 
	</form>	
</body>
</html>
